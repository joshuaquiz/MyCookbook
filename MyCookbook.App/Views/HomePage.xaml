<?xml version="1.0" encoding="utf-8" ?>
<views:BasePage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:views="using:MyCookbook.App.Views"
    xmlns:recipeSummaryList="clr-namespace:MyCookbook.App.Components.RecipeSummaryList"
    x:Class="MyCookbook.App.Views.HomePage"
    x:Name="Root"
    Title="Home"
    Shell.NavBarIsVisible="False"
    Shell.PresentationMode="NotAnimated"
    BackgroundColor="{AppThemeBinding Light={StaticResource ListBackgroundColorLight}, Dark={StaticResource ListBackgroundColorDark}}">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="{StaticResource HeightMedium}" />
        </Grid.RowDefinitions>
        <Grid
            x:Name="SearchGrid"
            Grid.Row="0"
            Grid.Column="0"
            Padding="0"
            BackgroundColor="{AppThemeBinding Light={StaticResource PageBackgroundColorLight}, Dark={StaticResource PageBackgroundColorDark}}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="{StaticResource SpacingMedium}" />
                <ColumnDefinition Width="{StaticResource IconSizeMedium}" />
                <ColumnDefinition Width="8" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="{StaticResource SpacingMedium}" />
                <ColumnDefinition Width="{StaticResource IconSizeLarge}" />
                <ColumnDefinition Width="{StaticResource SpacingMedium}" />
                <ColumnDefinition Width="{StaticResource IconSizeLarge}" />
                <ColumnDefinition Width="{StaticResource SpacingMedium}" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="{StaticResource SpacingMedium}" />
                <RowDefinition Height="{StaticResource HeightSmall}" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="{StaticResource SpacingMedium}" />
                <RowDefinition Height="{StaticResource BorderThicknessMedium}" />
            </Grid.RowDefinitions>
            <Image
                Grid.Row="1"
                Grid.Column="1"
                Source="search"
                WidthRequest="{StaticResource IconSizeMedium}"
                HeightRequest="{StaticResource IconSizeMedium}"
                VerticalOptions="Center"
                HorizontalOptions="Center"
                Aspect="AspectFill" />
            <Entry
                x:Name="TextSearchEntry"
                Grid.Row="1"
                Grid.Column="3"
                HeightRequest="{StaticResource HeightSmall}"
                FontSize="{StaticResource FontSizeSubtitle}"
                Placeholder="Start searching"
                HorizontalOptions="Fill"
                VerticalOptions="Center"
                Text="{Binding SearchText}" />
            <ImageButton
                x:Name="ClearButton"
                Grid.Row="1"
                Grid.Column="5"
                Source="close"
                WidthRequest="{StaticResource IconSizeLarge}"
                HeightRequest="{StaticResource IconSizeLarge}"
                VerticalOptions="Center"
                HorizontalOptions="Center"
                Aspect="AspectFill"
                Margin="0"
                Padding="13"
                Command="{Binding ClearFiltersCommand}" />
            <ImageButton
                x:Name="FilterButton"
                Grid.Row="1"
                Grid.Column="7"
                Source="filter"
                WidthRequest="{StaticResource IconSizeLarge}"
                HeightRequest="{StaticResource IconSizeLarge}"
                VerticalOptions="Center"
                HorizontalOptions="Center"
                Aspect="AspectFill"
                Padding="11"
                Command="{Binding ToggleFilterCommand}" />
            <StackLayout
                x:Name="FilterSection"
                Grid.Row="2"
                Grid.Column="1"
                Grid.ColumnSpan="7"
                Margin="0,{StaticResource SpacingMedium},0,0"
                IsVisible="{Binding IsFilterVisible}">
                <Label
                    Text="Categories"
                    FontAttributes="Bold"
                    Margin="0,0,0,5" />
                <CollectionView 
                    x:Name="CategoriesCollectionView"
                    HeightRequest="50"
                    ItemsLayout="HorizontalList">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Button
                                Text="{Binding Name}"
                                BackgroundColor="{Binding IsSelected, Converter={StaticResource BoolToColorConverter}}"
                                Margin="5,0"
                                Command="{Binding Source={RelativeSource AncestorType={x:Type views:HomePage}}, Path=BindingContext.CategorySelectedCommand}"/>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
                <Label Text="Include Ingredients" FontAttributes="Bold" Margin="0,10,0,5" />
                <Entry
                    x:Name="IncludeIngredientsEntry"
                    Placeholder="Enter ingredients to include"
                    Text="{Binding IncludeIngredients}" />
                <Label Text="Exclude Ingredients" FontAttributes="Bold" Margin="0,10,0,5" />
                <Entry
                    x:Name="ExcludeIngredientsEntry"
                    Placeholder="Enter ingredients to exclude"
                    Text="{Binding ExcludeIngredients}" />
            </StackLayout>
            <BoxView
                Grid.Row="4"
                Grid.Column="0"
                Grid.ColumnSpan="9"
                HeightRequest="2"
                HorizontalOptions="Fill"
                Color="{AppThemeBinding Light={StaticResource Gray300}, Dark={StaticResource Gray600}}" />
        </Grid>
        <recipeSummaryList:RecipeSummaryListControl
            x:Name="RecipeList"
            Grid.Row="1"
            Grid.Column="0" />
        <Rectangle
            Grid.Row="2"
            Grid.Column="0"
            HorizontalOptions="Fill"
            VerticalOptions="Fill"
            BackgroundColor="Gray"/>
        <!--<controls:MTAdView
            x:Name="MyAdView"
            Grid.Row="3"
            Grid.Column="0"
            HeightRequest="90"
            Margin="0,50,0,0"
            BackgroundColor="Transparent"
            AdsId="ca-app-pub-3327131024555440/4066729058"
            AdSize="AnchoredAdaptive" />-->
    </Grid>
</views:BasePage>

