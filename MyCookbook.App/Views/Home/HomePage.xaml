<?xml version="1.0" encoding="utf-8" ?>
<views:BasePage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:views="using:MyCookbook.App.Views"
    xmlns:home="using:MyCookbook.App.Views.Home"
    xmlns:recipeSummaryList="clr-namespace:MyCookbook.App.Components.RecipeSummaryList"
    x:Class="MyCookbook.App.Views.Home.HomePage"
    x:Name="Root"
    Title="Home"
    Shell.NavBarIsVisible="False"
    Shell.PresentationMode="NotAnimated"
    BackgroundColor="{AppThemeBinding Light={StaticResource Gray100}, Dark={StaticResource Black}}">
    <Grid
        ColumnDefinitions="*"
        RowDefinitions="Auto,*,50">
        <Grid
            x:Name="SearchGrid"
            Grid.Row="0"
            Grid.Column="0"
            ColumnDefinitions="10,18,8,*,10,20,10,20,10"
            RowDefinitions="10,25,Auto">
            <Image
                Grid.Row="1"
                Grid.Column="1"
                Source="search"
                WidthRequest="18"
                HeightRequest="18"
                VerticalOptions="Center"
                HorizontalOptions="Center"
                Aspect="AspectFill" />
            <Entry
                x:Name="TextSearchEntry"
                Grid.Row="1"
                Grid.Column="3"
                HeightRequest="25"
                Placeholder="Start searching"
                HorizontalOptions="Fill"
                VerticalOptions="Center"
                TextChanged="TextSearchEntry_OnTextChanged" />
            <ImageButton
                x:Name="ClearButton"
                Grid.Row="1"
                Grid.Column="5"
                Source="close"
                WidthRequest="20"
                HeightRequest="20"
                VerticalOptions="Center"
                HorizontalOptions="Center"
                Aspect="AspectFill"
                Margin="0"
                Padding="13"
                Clicked="ClearButton_OnClicked" />
            <ImageButton
                x:Name="FilterButton"
                Grid.Row="1"
                Grid.Column="7"
                Source="filter"
                WidthRequest="20"
                HeightRequest="20"
                VerticalOptions="Center"
                HorizontalOptions="Center"
                Aspect="AspectFill"
                Padding="11"
                Clicked="FilterButton_OnClicked" />
            <StackLayout
                x:Name="FilterSection"
                Grid.Row="2"
                Grid.Column="1"
                Grid.ColumnSpan="7"
                Margin="0,10,0,0"
                IsVisible="False">
                <Label
                    Text="Categories"
                    FontAttributes="Bold"
                    Margin="0,0,0,5" />
                <CollectionView 
                    x:Name="CategoriesCollectionView"
                    HeightRequest="50"
                    ItemsLayout="HorizontalList">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Button 
                                Text="{Binding Name}"
                                BackgroundColor="{Binding IsSelected, Converter={StaticResource BoolToColorConverter}}"
                                Margin="5,0"
                                Clicked="CategoryButton_OnClicked"/>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
                <Label Text="Include Ingredients" FontAttributes="Bold" Margin="0,10,0,5" />
                <Entry
                    x:Name="IncludeIngredientsEntry"
                    Placeholder="Enter ingredients to include"
                    TextChanged="IncludeIngredientsEntry_OnTextChanged" />
                <Label Text="Exclude Ingredients" FontAttributes="Bold" Margin="0,10,0,5" />
                <Entry
                    x:Name="ExcludeIngredientsEntry"
                    Placeholder="Enter ingredients to exclude"
                    TextChanged="ExcludeIngredientsEntry_OnTextChanged" />
            </StackLayout>
        </Grid>
        <recipeSummaryList:RecipeSummaryListControl
            x:Name="RecipeList"
            Grid.Row="1"
            Grid.Column="0"
            GetData="{Binding GetData, Source={Reference Root}}" />
        <home:HomeBar
            Grid.Row="1"
            Grid.Column="0"
            Margin="10,0,10,10"
            Navigate="HomeBar_OnNavigate" />
        <Rectangle
            Grid.Row="3"
            Grid.Column="0"
            HorizontalOptions="Fill"
            VerticalOptions="Fill"
            BackgroundColor="Gray"/>
        <!--<controls:MTAdView
            x:Name="MyAdView"
            Grid.Row="3"
            Grid.Column="0"
            HeightRequest="90"
            Margin="0,50,0,0"
            BackgroundColor="Transparent"
            AdsId="ca-app-pub-3327131024555440/4066729058"
            AdSize="AnchoredAdaptive" />-->
    </Grid>
</views:BasePage>

